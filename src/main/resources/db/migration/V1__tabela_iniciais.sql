DROP TABLE IF EXISTS TB_ARQUIVO CASCADE;
CREATE TABLE TB_ARQUIVO(
    COD_ARQUIVO BIGINT GENERATED BY DEFAULT AS IDENTITY primary key,
    BASE64 BYTEA
);

DROP TABLE IF EXISTS TB_CARGO;
CREATE TABLE TB_CARGO(
    COD_CARGO BIGINT GENERATED BY DEFAULT AS IDENTITY primary key,
    TX_NOME VARCHAR(255)
);

DROP TABLE IF EXISTS TB_FUNCIONARIO;
CREATE TABLE TB_FUNCIONARIO(
    COD_FUNCIONARIO BIGINT GENERATED BY DEFAULT AS IDENTITY primary key,
    TX_NOME VARCHAR(255),
    TX_CPF VARCHAR(11),
    TX_RG VARCHAR(7),
    TX_SEXO VARCHAR(50),
    DT_NASCIMENTO DATE,
    TX_STATUS VARCHAR(255),
    BOOL_UTILIZA_EPI BOOL,
    COD_ARQUIVO BIGINT,
    COD_CARGO BIGINT,
   FOREIGN KEY (COD_ARQUIVO) REFERENCES TB_ARQUIVO (COD_ARQUIVO),
   FOREIGN KEY (COD_CARGO) REFERENCES TB_CARGO (COD_CARGO)
);

DROP TABLE IF EXISTS TB_ATIVIDADE;
CREATE TABLE TB_ATIVIDADE(
    COD_ATIVIDADE BIGINT GENERATED BY DEFAULT AS IDENTITY primary key,
    TX_NOME VARCHAR(255)
);

DROP TABLE IF EXISTS TB_EQUIPAMENTO;
CREATE TABLE TB_EQUIPAMENTO(
    COD_EQUIPAMENTO BIGINT GENERATED BY DEFAULT AS IDENTITY primary key,
    TX_NOME VARCHAR(255),
    NU_CERTIFICADO_APROVACAO INTEGER
);

DROP TABLE IF EXISTS TB_ATIVIDADE_EQUIPAMENTO;
CREATE TABLE  TB_ATIVIDADE_EQUIPAMENTO(
    COD_ATIVIDADE BIGINT,
    COD_EQUIPAMENTO BIGINT,
    COD_FUNCIONARIO BIGINT,
   FOREIGN KEY (COD_ATIVIDADE) REFERENCES TB_ATIVIDADE(COD_ATIVIDADE),
   FOREIGN KEY (COD_EQUIPAMENTO) REFERENCES TB_EQUIPAMENTO(COD_EQUIPAMENTO),
   FOREIGN KEY (COD_FUNCIONARIO) REFERENCES TB_FUNCIONARIO(COD_FUNCIONARIO)
);
